<!--
	SOLICITUD
		id_solicitud
		especie
		variedad
		cantidad
		id_usuario (FK)
		id_orden (FK)
-->

<div class="crearSolicitud-contenedor" style="padding-left:2rem; padding-right:2rem; padding-bottom:2rem">
	<div class="crearSolicitud-contenedor-titulo">
		<h2 class="crearSolicitud-contenedor-titulo__h2">Crear Solicitud</h2>
	</div>
	<form id="crearSolicitud-formulario" action="">
		<div class="crearSolicitud-contenedor-formulario grid grid-cols-1 sm:grid-cols-4">
			<!-- Especie -->
			<div class="contenedor-selects">
				<select id="especie" name="especie" onchange="cambiarVariedad()"
					class="contenedor-selects__select focus:outline-none focus:border-orange-500">
					{% for e in especie %}
						<option value=""></option>
						<option value="{{ e.0 }}">{{ e.1 }}</option>
					{% endfor %}
				</select>

				<!-- <i class="fas fa-angle-down absolute right-0 mr-2"></i> -->
			</div>
			<!-- Variedad -->
			<div class="contenedor-selects">
				<select id="variedadEspecie" name="variedad"
					class="contenedor-selects__select focus:outline-none focus:border-orange-500">

				</select>

				<!-- <i class="fas fa-angle-down absolute right-0 mr-2"></i> -->
			</div>
			<!-- Cantidad -->
			<div class="contenedor-inputs">
				<input id="crearSolicitud-cantidad" name="crearSolicitud-cantidad" type="text"
					class="input focus:outline-none focus:border-orange-500" placeholder="Cantidad Kilos" />
				<div class="contenedor-inputs-error">
					<span class="contenedor-inputs-error__span"> La cantidad ingresada no
						es
						valida.</span>
				</div>
			</div>
			<!-- Btn -->
			<div class="contenedor-btns">
				<button type="menu" class="btn bg-green-500 text-white w-full focus:outline-none">
					Agregar Fruta
				</button>
			</div>
		</div>
	</form>
	<div class="crearSolicitud-contenedor-tabla">
			<table class="listarSolicitud-contenedor-solicitudes">
				<thead>
					<tr class="crearSolicitud-contenedor-tabla__tr">
						<th class="crearSolicitud-contenedor-tabla__th w-1/12">#</th>
						<th class="crearSolicitud-contenedor-tabla__th w-1/3 text-left">Fruta</th>
						<th class="crearSolicitud-contenedor-tabla__th w-1/3 text-left">Variedad Fruta</th>
						<th class="crearSolicitud-contenedor-tabla__th w-1/12">Cantidad</th>
						<th class="crearSolicitud-contenedor-tabla__th w-1/12">Quitar</th>
					</tr>
				</thead>
				<tbody class="crearSolicitud-contenedor-tabla__tbody">
					<tr class="crearSolicitud-contenedor-tabla-tbody__tr">
						<td class="crearSolicitud-contenedor-tabla__td text-center">1</td>
						<td class="crearSolicitud-contenedor-tabla__td">Manzana</td>
						<td class="crearSolicitud-contenedor-tabla__td">Candy</td>
						<td class="crearSolicitud-contenedor-tabla__td text-center">10</td>
						<td class="crearSolicitud-contenedor-tabla__td text-center">
							<button type="menu" class="px-2 py-1 rounded-lg bg-red-500 text-white focus:outline-none"><i
									class="fas fa-trash"></i></button>
						</td>
					</tr>
					<tr class="crearSolicitud-contenedor-tabla-tbody__tr">
						<td class="crearSolicitud-contenedor-tabla__td text-center">2</td>
						<td class="crearSolicitud-contenedor-tabla__td">Platano</td>
						<td class="crearSolicitud-contenedor-tabla__td">Amarillo</td>
						<td class="crearSolicitud-contenedor-tabla__td text-center">15</td>
						<td class="crearSolicitud-contenedor-tabla__td text-center">
							<button type="menu" class="px-2 py-1 rounded-lg bg-red-500 text-white focus:outline-none"><i
									class="fas fa-trash"></i></button>
						</td>
					</tr>
					<tr class="crearSolicitud-contenedor-tabla-tbody__tr">
						<td class="crearSolicitud-contenedor-tabla__td text-center">3</td>
						<td class="crearSolicitud-contenedor-tabla__td">Peras</td>
						<td class="crearSolicitud-contenedor-tabla__td">Verdes</td>
						<td class="crearSolicitud-contenedor-tabla__td text-center">30</td>
						<td class="crearSolicitud-contenedor-tabla__td text-center">
							<button type="menu" class="px-2 py-1 rounded-lg bg-red-500 text-white focus:outline-none"><i
									class="fas fa-trash"></i></button>
						</td>
					</tr>
				</tbody>
			</table>
		<div class="contenedor-btns centrar-contenedor">
			<button type="menu" class="btn bg-green-500 text-white w-1/4 focus:outline-none">
				Enviar Solicitud
			</button>
		</div>
	</div>
</div>


<script>

	function cambiarVariedad(){
		let categoriaId = document.getElementById('especie').value;
		//alert(categoriaId);
		let url='variedades/?especie='+categoriaId;
		fech(url)
		.then(function(result){
			return result.text();
		})
		.then(function(result){
			document.getElementById('variedadEspecie').innerHTML = result ;
		})
	}

	// Inicio Select Select2
	$(document).ready(function () {

		const selects = document.getElementsByTagName('select');
		for (const element of selects) {
			$(`#${element.id}`).select2({
				placeholder: `Selecciona ${element.id === 'crearSolicitud-especie' ? 'Fruta' : 'Especie'}`,
				language: {
					noResults: function () {
						return "No hay resultado";
					},
					searching: function () {
						return "Buscando..";
					}
				},
				// theme: "registro-contenedor-selects__select"
			});
		}

	});
	// Fin Select Select2
</script>