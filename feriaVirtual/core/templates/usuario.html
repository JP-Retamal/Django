{% extends 'base.html' %}

{% block title %} {{ tituloPagina }} {% endblock %}

{% block navbar %}  

{% include 'include/navbar-admin.html' %}

{% endblock %}

{% block content %}
    <div class="usuario-contenedor grid justify-center lg:my-10" style="padding-left:5rem; padding-right:5rem; padding-bottom:5rem">
        <div class="usuario-contenedor-titulo">
            <h1 class="usuario-contenedor-titulo__h1">Bienvenido {{user.get_full_name }}!</h1>
            <br>
            {% if perms.core.view_ventalocal %}
            <h3>Nuevas solicitudes:</h3>
            <div class="admin-solicitudListar-contenedor-general m-4 mb-20 sm:mb-0 sm:ml-24">
                <div class="admin-solicitudListar-body">
                    <div class="admin-solicitudListar-listado my-4">
                        <table class="admin-solicitudListar-table sm:w-full" role="table">
                            <thead class="admin-solicitudListar-table__thead" role="rowgroup">
                                <!-- SOLICITUD -->
                                <th class="admin-solicitudListar-table__thead-th font-lato border border-gray-400 sm:border-0 sm:text-white sm:text-sm sm:border-b sm:border-gray-500 sm:bg-gray-500 sm:p-2 rounded-tl-md"
                                role="columnheader">N SOLICITUD</th>
                                <!-- SOLICITUD -->
                                <th class="admin-solicitudListar-table__thead-th font-lato border border-gray-400 sm:border-0 sm:text-white sm:text-sm sm:border-b sm:border-gray-500 sm:bg-gray-500 sm:p-2"
                                role="columnheader">FECHA CREACION</th>
                                <!-- SOLICITUD -->
                                <th class="admin-solicitudListar-table__thead-th font-lato border border-gray-400 sm:border-0 sm:text-white sm:text-sm sm:border-b sm:border-gray-500 sm:bg-gray-500 sm:p-2"
                                role="columnheader">SOLICITANTE</th>
                                <!-- SOLICITUD -->
                                <th class="admin-solicitudListar-table__thead-th font-lato border border-gray-400 sm:border-0 sm:text-white sm:text-sm sm:border-b sm:border-gray-500 sm:bg-gray-500 sm:p-2"
                                role="columnheader">ESTADO</th>
                                <!-- SOLICITUD -->
                                <th class="admin-solicitudListar-table__thead-th font-lato border border-gray-400 sm:border-0 sm:text-white sm:text-sm sm:border-b sm:border-gray-500 sm:bg-gray-500 sm:p-2"
                                role="columnheader">TOTAL</th>                        
                            </thead>

                            <tbody role="rowgroup">
                                <tr role="trow">
                                    <td class="admin-solicitudListar-table__td font-lato border-t-2 border-l-2 border-r-2 border-gray-500 sm:border-0 sm:text-sm sm:text-center sm:border-b sm:border-gray-500 sm:p-2" role="cell">202010212019</td>
                                    <td class="admin-solicitudListar-table__td font-lato border-l-2 border-r-2 border-gray-500 sm:border-0 sm:text-sm sm:text-center sm:border-b sm:border-gray-500 sm:p-2" role="cell">21/10/2020</td>
                                    <td class="admin-solicitudListar-table__td font-lato border-l-2 border-r-2 border-gray-500 sm:border-0 sm:text-sm sm:text-center sm:border-b sm:border-gray-500 sm:p-2" role="cell">JaneDoe</td>
                                    <td class="admin-solicitudListar-table__td font-lato border-l-2 border-r-2 border-gray-500 sm:border-0 sm:text-sm sm:text-center sm:border-b sm:border-gray-500 sm:p-2" role="cell">Nueva</td>
                                    <td class="admin-solicitudListar-table__td font-lato border-b-2 border-l-2 border-r-2 border-gray-500 sm:border-0 sm:text-sm sm:text-center sm:border-b sm:border-gray-500 sm:p-2" role="cell">0</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            {% endif %}
        </div>
    </div>
    <div class="usuario-contendor-general grid grid-col-1 lg:grid-cols-4">
        <div class="usuario-contenedor-modal">
            {% block contentUsuario %} {% endblock %}
        </div>
        <div class="usuario-contenedor-aside">
            <aside class="usuario-aside grid grid-cols-4 lg:grid-cols-1">
                {% if perms.core.view_pago %}
                    <!-- historial de compra-->
                    <div class="usuario-contenedor-btns centrar-contenedor lg:justify-start">
                        <a href="javascript:enviar_formulario2()">
                            <i class="fas fa-clipboard-check usuario-contenedor-btns__i usuario-contenedor-btns__i--activo"></i>
                            <span class="usuario-contenedor-btns__span lg:inline-block usuario-contenedor-btns__span--activo">
                            Historial de Compras</span>
                        </a>
                        <form action="{% url 'historial_compra' %}" method="POST" name="formulario2">
                            {% csrf_token %}
                            <input type="hidden" name="valcorreo" value="{{user.email}}" >
                        </form>
                        <script>
                            function enviar_formulario2(){
                                document.formulario2.submit()
                            }
                        </script>
                    </div>
                    <!-- Pedidospuntos -->
                    <div class="usuario-contenedor-btns centrar-contenedor lg:justify-start">
                        <a href="#">
                            <i class="fas fa-shopping-cart usuario-contenedor-btns__i"></i>
                            <span class="usuario-contenedor-btns__span lg:inline-block">Puntos</span>
                        </a>
                    </div>
                {% else %}
                    {% if perms.core.view_solicitud %}
                        <!-- Solicitud de Compra -->
                        <div class="usuario-contenedor-btns centrar-contenedor lg:justify-start">
                            <a href="{% url 'solicitud' %}" class="">
                                <i class="fas fa-clipboard-check usuario-contenedor-btns__i usuario-contenedor-btns__i--activo"></i>
                                <span class="usuario-contenedor-btns__span lg:inline-block usuario-contenedor-btns__span--activo">Solicitud de Compra</span>
                            </a>
                        </div>
                        <!-- Pedidos -->
                        <div class="usuario-contenedor-btns centrar-contenedor lg:justify-start">
                            <a href="{% url 'pedido' %}">
                                <i class="fas fa-shopping-cart usuario-contenedor-btns__i"></i>
                                <span class="usuario-contenedor-btns__span lg:inline-block">Pedidos</span>
                            </a>
                        </div>
                    {% else %}
                        {% if perms.core.view_detalleoferta %}
                            <!-- historial de Ofertas-->
                            <div class="usuario-contenedor-btns centrar-contenedor lg:justify-start">
                                <a href="javascript:enviar_formulario4()">
                                    <i class="fas fa-clipboard-check usuario-contenedor-btns__i usuario-contenedor-btns__i--activo"></i>
                                    <span class="usuario-contenedor-btns__span lg:inline-block usuario-contenedor-btns__span--activo">
                                    Historial de Ofertas</span>
                                </a>
                                <form action="{% url 'historial_ofertas' %}" method="POST" hidden="hidden" name="formulario4" >
                                    {% csrf_token %}
                                    <input type="hidden" value="{{request.user.username}}" name="valcorreo">
                                </form>
                                <script>
                                    function enviar_formulario4(){
                                    document.formulario4.submit()
                                    }
                                </script>
                            </div>
                            <!-- Pedidospuntos -->
                            <div class="usuario-contenedor-btns centrar-contenedor lg:justify-start">
                                <a href="{% url 'portalDeOfertas' %}">
                                    <i class="fas fa-shopping-cart usuario-contenedor-btns__i"></i>
                                    <span class="usuario-contenedor-btns__span lg:inline-block">
                                    Portal de Ofertas</span>
                                </a>
                            </div>
                        {% endif %}
                    {% endif %}
                {% endif %}
                {% if perms.core.view_ventalocal %}
                                    
                 {% else %}              
                    <!-- Cuenta -->
                    <div class="usuario-contenedor-btns centrar-contenedor lg:justify-start">
                        <a href="javascript:enviar_formulario5()">
                            <i class="fas fa-address-card usuario-contenedor-btns__i"></i>
                            <span class="usuario-contenedor-btns__span lg:inline-block">
                            Cuenta</span>
                        </a>
                        <form action="{% url 'informacion' %}" method="POST" hidden="hidden" name="formulario5" >
                            {% csrf_token %}
                            <input type="hidden" value="{{request.user.username}}" name="valcorreo">
                        </form>
                        <script>
                            function enviar_formulario5(){
                            document.formulario5.submit()
                            }
                        </script>
                    </div>
                    <!-- Salir -->
                    <div class="usuario-contenedor-btns centrar-contenedor lg:justify-start">
                        <a href="{% url 'logout' %}">
                            <i class="fas fa-sign-out-alt usuario-contenedor-btns__i"></i>
                            <span class="usuario-contenedor-btns__span lg:inline-block">
                            Salir</span>
                        </a>
                    </div>
                {% endif %}
            </aside>
        </div>
    </div>
</div>
{% endblock %}